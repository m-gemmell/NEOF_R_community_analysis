# Jupyter
```{r, fig.align = 'center',out.width= '20%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_logo.png", auto_pdf = TRUE)
```

[`Jupyter-notebook`](https://jupyter.org/) is a nice browser based method to write, edit, and run code.
It was initally created for Python coding, but has since branched out to many other languages, such as `R`.

We are using it in this workshop for a variety of its properties:

- It is popular and well maintained.
- It is lightweight. Other heavier weight programs, such as RStudio, would struggle in our HPC due to the graphical and CPU load.
- It is interactive and displays code output. 
- It allows for easier annotation, editing, and debugging than the command line. 
- It provides a graphical interface for hanging directories and choosing files.

Before carrying out any analysis we will go through a quick tutorial of `jupyter-notebook`.

## Open Jupyter-notebook

The first step is to open `jupyter-notebook`.
Run the below command in your `(r_community)` environment.

```{bash, eval=FALSE}
jupyter-notebook
```

This will open `jupyter-notebook` in firefox. We won't need to access the linux terminal anymore. Leave it running `jupyter-notebook` and full screen your firefox so you should see something like below.

```{r, fig.align = 'center',out.width= '100%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_notebook_example_1.png", auto_pdf = TRUE)
```

## Create R notebook
The next step is to create a R notebook.

1. Click on the __"New"__ button towards the top right, right of the "Upload" button.
2. From the dropdown click __"R"__ below "Python 3 (ipykernel)".

This will open up a new R notebook like below.

```{r, fig.align = 'center',out.width= '100%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_notebook_example_2.png", auto_pdf = TRUE)
```

## Cells and code

Jupyter-notebook uses cells (the gray boxes) to separate code. 
This is very useful to compartmentalise our code.

There will already be one cell. Within the cell, type in the below commands.

```{r, eval=FALSE}
1+1
2-3
```

When pressing enter in cells it will create a new line.
To run all commands in a cell press `CTRL + enter`. 

Run your current cell and you should see something like below.

```{r, fig.align = 'center',out.width= '100%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_notebook_example_3.png", auto_pdf = TRUE)
```

## Create new cells

You can create new cells by 2 different means.

- Press the `+` button on the tool bar (between the floppy disk `r icons::ionicons("save-outline")` and scissors `r icons::ionicons("cut")`). This will add a cell below your currently selected option.
- Click on the __`Insert`__ button and use the dropdown to add a cell above or below your currently selected cell.

__Tip:__ Hover over the toolbar icons to display a text based description of its function.

With that knowledge add a second cell below the first cell. 
Add the following code to your second cell but do not run it.

```{r, eval=FALSE}
num_1 <- 3
num_2 <- 10
```

__Tip:__ Notice there are green lines around your selected cell.

Insert a third cell and add the following code to it. Do not run the code.

```{r, eval=FALSE}
num_1 * num_2
```

## Running code

Try to run the code in the third cell. 
There should be an error as we have not created the objects `num_1` & `num_2`.
We have only written the code for these objects but not run them.

We can run all the code in a notebook starting from the first cell to the last cell.

Two methods to run all cells are:

- Click on the __"Cell"__ button.
- Click __"Run All"__ from the drop-down options.

You should then see something like the below in your notebook.

```{r, fig.align = 'center',out.width= '100%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_notebook_example_4.png", auto_pdf = TRUE)
```

There is no output printed for cell 2 because we are assigning variables. However, now there is the correct output for Cell 3 as the variables were assigned before the command was run.

## Saving the file

As with RStudio and other good coding interfaces we can save our notebook.

First we should rename the file. Rename the notebook to __"jupyter_tut"__:

1. Click on the name of the notebook, currently called __"Untitled"__.
  - This is at the very top of the notebook, right of the Jupyter logo.
2. A pop-up called __"Rename Notebook"__ will appear. Change the Name to __"jupyter_tut"__.
3. Click __"Rename"__.

Now we can save the file. Two methods to save are:

- Click the floppy disk `r icons::ionicons("save-outline")` on the toolbar.
- Click on the __"File"__ button. Click __"Save and Checkpoint"__ from the dropdown options.

## Close the notebook

To close the notebook:

- Click on __"File"__.
- From the dropdown options click __"Close and Halt"__.

When you are back in the file explorer page you will not yet set the new file you saved.
You will need to refresh the page with the Refresh button `r icons::ionicons("refresh")` towards the top right.

```{r, fig.align = 'center',out.width= '100%', echo=FALSE }
knitr::include_graphics(path = "figures/jupyter_notebook_refresh.png", auto_pdf = TRUE)
```



